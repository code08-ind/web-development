<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>_.chain</title>
    <script src="../../bower_components/underscore/underscore.js"></script>
</head>
<body>
<script>
    //您可以在面向对象或者函数的风格下使用Underscore, 这取决于您的个人偏好. 以下两行代码都可以 把一个数组里的所有数字乘以2.

    console.log(_.map([1, 2, 3], function(n){ return n * 2; }));    //=>[2, 4, 6]
    console.log(_([1, 2, 3]).map(function(n){ return n * 2; }));    //=>[2, 4, 6]

    //对一个对象使用 chain 方法, 会把这个对象封装并 让以后每次方法的调用结束后都返回这个封装的对象, 当您完成了计算, 可以使用 value 函数来取得最终的值.
    //此外, 数组原型方法也通过代理加入到了链式封装的Underscore对象, 所以您可以在链式语法中直接使用 reverse 或 push 方法, 然后再接着其他的语句.

    //_.chain(obj)
    //返回一个封装的对象. 在封装的对象上调用方法会返回封装的对象本身, 直道 value 方法调用为止.

    var stooges = [{name: 'curly', age: 25}, {name: 'moe', age: 21}, {name: 'larry', age: 23}];
    var youngest = _.chain(stooges)
            .sortBy(function(stooge){ return stooge.age; })
            .map(function(stooge){ return stooge.name + ' is ' + stooge.age; })
            .first()
            .value();
    console.log(youngest);  //=> "moe is 21"

</script>
</body>
</html>